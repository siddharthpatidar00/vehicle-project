<c-card class="shadow-md rounded-lg mb-6">
    <!-- Header -->
    <c-card-header class="flex items-center justify-between flex-wrap gap-2">
        <span class="text-gray-400">Brand List</span>
        <div class="gap-3 flex">
            <button (click)="openModal()" style="border-radius: 3px;"
                class="px-4 py-2 text-white bg-[#5856d6] hover:bg-[#5856d6e9]">
                Add Brand
            </button>

            <input
                class="w-full sm:w-64 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="Search brands..." />
        </div>
    </c-card-header>
    <c-card-body class="p-0">
        <!-- Desktop Table -->
        <div class="overflow-x-auto hidden sm:block p-2">
            <table class="min-w-full text-sm text-left border shadow-md rounded-lg">
                <thead>
                    <tr>
                        <th class="px-4 py-2 border">S.No.</th>
                        <th class="px-4 py-2 border">Brand Name</th>
                        <th class="px-4 py-2 border">Description</th>
                        <th class="px-4 py-2 border">Image</th>
                        <th class="px-4 py-2 border">Status</th>
                        <th class="px-4 py-2 border text-center">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let brand of paginatedBrands; let i = index">
                        <td class="px-4 py-2 border">{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
                        <td class="px-4 py-2 border">{{ brand.brand_name }}</td>
                        <td class="px-4 py-2 border">{{ brand.brand_description }}</td>
                        <td class="px-4 py-2 border w-45">
                            <img *ngIf="brand.brand_image" [src]="'http://localhost:5000' + brand.brand_image"
                                alt="Brand" class=" object-cover rounded" />

                        </td>
                        <td class="px-4 py-2 border text-center">
                            <button (click)="toggleStatus(brand)" class="px-2 py-1 text-white rounded" [ngClass]="{
          'bg-green-600': brand.status === 'Active',
          'bg-red-500': brand.status === 'Inactive'
        }">
                                {{ brand.status }}
                            </button>

                        </td>
                        <td class="px-4 py-2 border text-center">
                            <div class="flex items-center justify-center gap-2">
                                <button (click)="editBrand(brand)" style="color: blue;" title="Edit" class="p-1">
                                    <c-icon name="cil-pencil" class="w-5 h-5"></c-icon>
                                </button>
                                <button (click)="deleteBrand(brand._id!)" style="color: red;" title="Delete"
                                    class="p-1">
                                    <c-icon name="cil-trash" class="w-5 h-5"></c-icon>
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- Mobile Cards -->
        <div class="sm:hidden flex flex-col space-y-4 p-2">
            <c-card class="shadow-sm rounded-lg" *ngFor="let brand of paginatedBrands; let i = index">
                <c-card-body class="p-4">
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">S.No.</span>
                        <span>{{ (currentPage - 1) * itemsPerPage + i + 1 }}</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">Brand</span>
                        <span>{{ brand.brand_name }}</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">Status</span>
                        <span class="font-semibold"
                            [ngClass]="brand.status === 'Active' ? 'text-green-600' : 'text-red-600'">
                            {{ brand.status }}
                        </span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">Description</span>
                        <span>{{ brand.brand_description }}</span>
                    </div>
                    <div class="flex justify-between mb-4">
                        <span class="font-semibold">Image</span>
                        <img *ngIf="brand.brand_image" [src]="'http://localhost:5000' + brand.brand_image"
                            [alt]="brand.brand_name" class="w-24 h-16 object-cover rounded" />
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="inline-block px-2 py-0.5 text-xs font-semibold">Action</span>
                        <div class="flex items-center gap-2">
                            <button (click)="editBrand(brand)" title="Edit" class="text-blue-600">
                                <c-icon name="cil-pencil" class="w-5 h-5"></c-icon>
                            </button>
                            <button (click)="deleteBrand(brand._id!)" title="Delete" class="text-red-600">
                                <c-icon name="cil-trash" class="w-5 h-5"></c-icon>
                            </button>
                        </div>
                    </div>
                </c-card-body>
            </c-card>
        </div>
        <!-- Pagination Controls -->
        <app-pagination [currentPage]="currentPage" [totalPages]="totalPages" (pageChange)="onPageChange($event)">
        </app-pagination>
        <app-confirm-modal [visible]="confirmVisible" title="Delete Brand"
            message="Are you sure you want to delete this brand?" confirmText="Delete" cancelText="Cancel"
            (onConfirm)="handleConfirmDelete()" (onCancel)="handleCancelDelete()">
        </app-confirm-modal>
    </c-card-body>
</c-card>
<!-- Add/Edit Brand Modal -->
<div *ngIf="showModal"
    class="fixed inset-0 bg-opacity-40 backdrop-blur-sm z-[9999] flex items-center justify-center p-4 sm:p-6">
    <div class="bg-white w-full max-w-md sm:max-w-lg rounded-lg shadow-xl p-3 sm:p-6 space-y-5">
        <span class="text-gray-400 sm:text-xl font-semibold">
            {{ editMode ? 'Edit Brand' : 'Add Brand' }}
        </span>
        <!-- Reactive Form -->
        <form [formGroup]="brandForm" (ngSubmit)="onSubmit()" class="space-y-4" novalidate>
            <!-- Brand Name -->
            <div>
                <label class="block mb-1 text-black text-sm font-medium">Brand Name</label>
                <input type="text" formControlName="brand_name"
                    class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" />
                <small class="text-red-500" *ngIf="submitted && getError('brand_name')">
                    {{ getError('brand_name') }}
                </small>
            </div>
            <!-- Brand Description -->
            <div>
                <label class="block mb-1 text-sm text-black font-medium">Brand Description</label>
                <textarea formControlName="brand_description" rows="3"
                    class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                <small class="text-red-500" *ngIf="submitted && getError('brand_description')">
                    {{ getError('brand_description') }}
                </small>
            </div>
            <!-- Brand Image -->
            <div class="text-black">
                <label class="block mb-1 text-sm font-medium">Upload Brand Image</label>
                <input id="brandImageUpload" type="file" (change)="onImageSelect($event)" accept="image/*"
                    class="hidden" />
                <label for="brandImageUpload"
                    class="w-full cursor-pointer flex flex-col items-center justify-center border border-gray-300 rounded px-4 py-6 transition hover:bg-gray-50 text-center">
                    <span class="text-sm font-medium text-gray-700">Select Image</span>
                </label>
                <!-- Image Preview -->
                <div *ngIf="imagePreview" class="mt-2.5 flex justify-center">
                    <img [src]="imagePreview" alt="Preview" class="max-h-40 rounded border border-gray-300" />
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex justify-end gap-2">
                <button type="button" (click)="closeModal()"
                    class="px-4 py-2 border border-red-500 rounded text-red-500 text-sm">
                    Cancel
                </button>
                <button type="submit" class="px-4 py-2 bg-[#5856d6] text-white rounded hover:bg-[#5856d6e9] text-sm">
                    Submit
                </button>
            </div>

        </form>
    </div>
</div>